<p-blockUI [blocked]="loading"></p-blockUI>

<p-toast></p-toast>
<p-tabView>
  <p-tabPanel>
    <ng-template pTemplate="header">
      <i class="pi pi-user mr-2"></i>
      <span>Test</span>
    </ng-template>
    <p-card styleClass="shadow-none">
      <h6 class="text-5xl">User details</h6>
      <div  style="height:3px;background:linear-gradient(90deg, var(--primary-color) 0%, rgba(33, 150, 243, 0) 50%);"></div>
      <form [formGroup]="form">
        <div  class=" formgrid grid">
          <div class="field col-6 ">
            <label for="firstname">Firstname</label>
            <input pInputText
                   formControlName="firstname"
                   [ngStyle]="{ '--surface-border': (submitted && f['firstname'].invalid) ? '#ea1035' : '#eae5e6' }"
                   class=" form-control text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                   type="text">
            @if (submitted && f['firstname'].errors) {
              <div class="p-error invalid-feedback">
                @if (f['firstname'].errors['required']) {
                  <div>Fullname is required</div>
                }
                @if (f['firstname'].errors['minlength']) {
                  <div>Username must be at least 6 characters</div>
                } @if (f['firstname'].errors['maxlength']) {
                <div>Username must not exceed 20 characters</div>
              }
              </div>
            }
          </div>
          <div class="field col-6 ">
            <label for="lastname">Lastname</label>
            <input formControlName="lastname"
                   [ngStyle]="{ '--surface-border': (submitted && f['lastname'].invalid) ? '#ea1035' : '#eae5e6' }"
                   class="form-control text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                   pInputText type="text">
            @if (submitted && f['lastname'].errors) {
              <div class="p-error invalid-feedback">
                @if (f['lastname'].errors['required']) {
                  <div>Lastname is required</div>
                }
                @if (f['lastname'].errors['minlength']) {
                  <div>Lastname must be at least 6 characters</div>
                } @if (f['lastname'].errors['maxlength']) {
                <div>Lastname must not exceed 20 characters</div>
              }
              </div>
            }
          </div>
          <div class="field col-6 p-fluid  ">
            <div class=" w-full" >
              <label for="birth_date" class=" block mb-2"> Date of birth </label>
              <p-calendar formControlName="dateOfBirth"
                          [showIcon]="true"
                          inputId="birth_date"></p-calendar>
              @if (submitted && f['dateOfBirth'].errors) {
                <div class="p-error invalid-feedback">
                  @if (f['dateOfBirth'].errors['required']) {
                    <div>Date of birth is required</div>
                  }
                </div>
              }
            </div>
          </div>

          <div class="field col-6 ">
            <label for="lastname">Phone Number</label>
            <input formControlName="phoneNumber"
                   [ngStyle]="{ '--surface-border': (submitted && f['phoneNumber'].invalid) ? '#ea1035' : '#eae5e6' }"
                   class=" form-control text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"
                   id="phoneNumber" pInputText type="text">
            @if (submitted && f['phoneNumber'].errors) {
              <div class="p-error invalid-feedback">
                @if (f['phoneNumber'].errors['required']) {
                  <div>Phone number is required</div>
                }
              </div>
            }
          </div>
          <div class="field col-6 p-fluid  ">
            <div class="w-full">
              <label for="language" class=" block mb-2"> Select a Language </label>
              <p-dropdown [options]="languages" formControlName="language" inputId="language"  [editable]="true" optionLabel="name"></p-dropdown>
            </div>
          </div>
        </div>

      </form>

      <ng-template pTemplate="footer">
        <div class="flex flex-row justify-content-between">
          <button pButton pRipple label="{{'CANCEL' | translate}}" icon="pi pi-times" class="p-button-text" (click)="cancel()"></button>
          <button pButton pRipple label="{{'SAVE' | translate}}" icon="pi pi-check" class="p-button-text right-0" (click)="validate()"></button>
        </div>
      </ng-template>
    </p-card>
  </p-tabPanel>
  <p-tabPanel>
    <ng-template pTemplate="header">
      <i class="pi pi-lock mr-2"></i>
      <span>Securit√©</span>
    </ng-template>
    <p-card styleClass="shadow-none">
      <div class="flex flex-column justify-content-start">
          <h6 class="text-5xl">User security</h6>
          <div class="mb-5"  style="height:3px;background:linear-gradient(90deg, var(--primary-color) 0%, rgba(33, 150, 243, 0) 50%);"></div>
        <div class="p-fluid">
          <div class="w-full">
            <label class="font-light" style="font-size: 1.1em" for="password">Password</label>
            <p-password [(ngModel)]="writer.password" [toggleMask]="true" inputId="password"></p-password>
          </div>
        </div>
        <div class="surface-border border-top-1 opacity-200 mt-4 mb-2 col-12"></div>
        <div class=" ml-2">
          <div class="flex align-items-center">
            <p-inputSwitch [(ngModel)]="writer.twoFactorEnabled" inputId="TwoFactor"></p-inputSwitch>
            <span class="ml-2 text-900">Two factor enabled</span>
          </div>
        </div>
      </div>
      <ng-template  pTemplate="footer">
        <div class="flex flex-row justify-content-between ">
          <button pButton pRipple label="{{'CANCEL' | translate}}" icon="pi pi-times" class="p-button-text" (click)="cancel()"></button>
          <button pButton pRipple label="{{'SAVE' | translate}}" icon="pi pi-check" class="p-button-text right-0" (click)="validate()"></button>
        </div>
      </ng-template>
    </p-card>
  </p-tabPanel>
</p-tabView>

